# Конечные точки

### `videoupload`

- `POST`-запрос на конечную точку `/videoupload` обрабатывает загрузку видео.

- В теле запроса должны быть следующие данные:
  - `video` (файл): загружаемое видео.
  - `image` (файл): изображение, которое будет использоваться в качестве миниатюры видео.
  - `name` (строка): название видео.
  - `desc` (строка): описание видео.
  - `tags` (строка): теги, связанные с видео (разделены запятыми).

### `search`

- `POST`-запрос на конечную точку `/search` производит поиск видео или каналов.

- В теле запроса должен быть следующий JSON:
  - `text` (строка): текст запроса.
  - `distance` (целое число, необязательно): максимальное расстояние Левештейна для поиска. По умолчанию равно 20.
  - `onlyname` (логический, необязательно): является ли возвращаемый результат только именами видео и каналов. По умолчанию равно `false`.

### `react/comment`

- `POST`-запрос на конечную точку `/react/comment` обрабатывает реакцию на комментарий.

- В теле запроса должен быть следующий JSON:
  - `CommentId` (целое число): ID комментария.
  - `IsLike` (логический): является ли реакция лайком или дизлайком.

### `comment/video`

- `POST`-запрос на конечную точку `/comment/video` обрабатывает комментарий к видео.

- В теле запроса должен быть следующий JSON:
  - `Text` (строка): текст комментария.
  - `VideoId` (целое число): ID видео.

### `get_recommended_videos`

- `POST`-запрос на конечную точку `/get_recommended_videos` получает рекомендованные видео.

- В теле запроса должен быть следующий JSON:
  - `UserId` (строка): ID пользователя.

### `login`

- `POST`-запрос на конечную точку `/login` обрабатывает вход пользователя.

- В теле запроса должен быть следующий JSON:
  - `username` (строка): имя пользователя.
  - `password` (строка): пароль пользователя.

### `register`

- `POST`-запрос на конечную точку `/register` обрабатывает регистрацию пользователя.

- В теле запроса должен быть следующий форм:
  - `username` (строка): имя пользователя.
  - `password` (строка): пароль пользователя.
  - `nickname` (строка): никнейм пользователя.

### `profile/<profilename:str>`

- `GET`-запрос на конечную точку `/profile/<profilename:str>` получает информацию о профиле пользователя.

- В параметрах маршрута должен быть указан имя пользователя.

- Возвращает json-объект, содержащий информацию о профиле пользователя, включая список видео, принадлежащих данному пользователю.

- В случае, если пользователь не найден, возвращает сообщение об ошибке с http кодом 404.

### `redact_video_image` и `redact_video`

- `POST`-запросы на конечные точки `/redact_video_image` и `/redact_video` обрабатывают редактирование изображения и видео соответственно.

- В теле запроса должны быть следующие данные:
  - `id` (целое число): ID видео, которое будет редактироваться.
  - `data` (файл): файл, который будет использоваться для редактирования.

### `whoami`

- `GET`-запрос на конечную точку `/whoami` получает информацию о текущем пользователе.

- Возвращает json-объект, содержащий информацию о текущем пользователе.

### `servevideo/<filename:str>`

- `GET`-запрос на конечную точку `/servevideo/<filename:str>` обрабатывает запрос на получение потока видео.

- В параметрах маршрута должен быть указан имя файла видео.

- В headerах запроса должны быть указаны информация о конкретном байте видео.

- Возвращает видео-поток начиная от указанного байта.

### `static/<filename:str>`

- `GET`-запрос на конечную точку `/static/<filename:str>` возвращает статический файл.

- В параметрах маршрута должен быть указан имя файла.

- Возвращает файл.

# Руководство для системного администратора: Как клонировать репозиторий с Git и запустить Python проект на Linux сервере

## Шаг 1: Установка Git

1. Откройте терминал на вашем сервере.
2. Установите Git, если он еще не установлен. Для этого выполните команду:
    ```sh
    sudo apt-get update
    sudo apt-get install git
    ```

## Шаг 2: Клонирование репозитория

1. В терминале выполните команду, заменив `<URL-репозитория>` на фактический URL:
    ```sh
    git clone https://github.com/TensorFlowKCPT/VideoHosting.git
    ```
2. Перейдите в каталог проекта:
    ```sh
    cd VideoHosting
    ```

## Шаг 3: Установка Python и виртуального окружения

1. Убедитесь, что Python установлен. Обычно в современных версиях Linux Python уже установлен. Проверить это можно командой:
    ```sh
    python3 --version
    ```
2. Установите `pip` (если он еще не установлен):
    ```sh
    sudo apt-get install python3-pip
    ```
3. Установите модуль `venv` для создания виртуального окружения:
    ```sh
    sudo apt-get install python3-venv
    ```

## Шаг 4: Создание и активация виртуального окружения

1. Создайте виртуальное окружение в каталоге проекта:
    ```sh
    python3 -m venv venv
    ```
2. Активируйте виртуальное окружение:
    ```sh
    source venv/bin/activate
    ```

## Шаг 5: Установка зависимостей проекта

1. Убедитесь, что вы находитесь в корневом каталоге проекта и виртуальное окружение активировано.
2. Установите все необходимые пакеты, указанные в файле `requirements.txt`:
    ```sh
    pip install -r requirements.txt
    ```

## Шаг 6: Запуск проекта

1. Обычно проект запускается с помощью определенного скрипта. Найдите в документации вашего проекта команду для запуска.
2. Например, если проект содержит файл `main.py`, выполните:
    ```sh
    python main.py
    ```

## Шаг 7: Дополнительные настройки (опционально)

1. Настройте сервер для работы в фоне. Для этого можно использовать инструменты вроде `screen`, `tmux` или системные службы (`systemd`).

Пример для `screen`:
```sh
screen -S VideoHosting
python main.py
```

Для выхода из сессии screen без завершения работы скрипта, нажмите Ctrl+A, затем D.

Для systemd создайте файл службы:

```sh
sudo nano /etc/systemd/system/video_hosting.service
```

Вставьте в него следующее содержимое, адаптировав пути к вашему проекту:

```ini
[Unit]
Description=VideoHosting
After=network.target

[Service]
User=your_user
WorkingDirectory=/path/to/your/project
ExecStart=/path/to/your/project/venv/bin/python /path/to/your/project/main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

Сохраните файл и выйдите из редактора.

Активируйте и запустите службу:

```sh
sudo systemctl enable video_hosting.service
sudo systemctl start video_hosting.service
```

Теперь ваш Python проект должен работать на вашем Linux сервере.